{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/lumora/apps/web/middleware.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\n\nfunction generateSessionId(): string {\n  const random = crypto.getRandomValues(new Uint8Array(16));\n  return Array.from(random).map(b => b.toString(16).padStart(2, '0')).join('');\n}\n\nexport function middleware(request: NextRequest) {\n  const response = NextResponse.next();\n  const hasSession = request.cookies.get('lumora_session');\n  if (!hasSession) {\n    const sessionId = generateSessionId();\n    // 90 days cookie, httpOnly\n    response.cookies.set('lumora_session', sessionId, {\n      httpOnly: true,\n      sameSite: 'lax',\n      secure: process.env.NODE_ENV === 'production',\n      maxAge: 60 * 60 * 24 * 90,\n      path: '/',\n    });\n  }\n  return response;\n}\n\nexport const config = {\n  matcher: ['/((?!api/health).*)'],\n};\n\n\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAEA,SAAS;IACP,MAAM,SAAS,OAAO,eAAe,CAAC,IAAI,WAAW;IACrD,OAAO,MAAM,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAA,IAAK,EAAE,QAAQ,CAAC,IAAI,QAAQ,CAAC,GAAG,MAAM,IAAI,CAAC;AAC3E;AAEO,SAAS,WAAW,OAAoB;IAC7C,MAAM,WAAW,gMAAY,CAAC,IAAI;IAClC,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC;IACvC,IAAI,CAAC,YAAY;QACf,MAAM,YAAY;QAClB,2BAA2B;QAC3B,SAAS,OAAO,CAAC,GAAG,CAAC,kBAAkB,WAAW;YAChD,UAAU;YACV,UAAU;YACV,QAAQ,oDAAyB;YACjC,QAAQ,KAAK,KAAK,KAAK;YACvB,MAAM;QACR;IACF;IACA,OAAO;AACT;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAsB;AAClC"}}]
}