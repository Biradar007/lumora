{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/udaybiradar/lumora-app/lumora/apps/web/src/lib/firebase.ts"],"sourcesContent":["import { FirebaseApp, getApp, getApps, initializeApp } from 'firebase/app';\nimport type { Analytics } from 'firebase/analytics';\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyBZjiyeNy0UHZzh6ZtjGM2QWzl7-FdJRSA',\n  authDomain: 'lumoradb.firebaseapp.com',\n  databaseURL: 'https://lumoradb-default-rtdb.firebaseio.com',\n  projectId: 'lumoradb',\n  storageBucket: 'lumoradb.firebasestorage.app',\n  messagingSenderId: '218715484711',\n  appId: '1:218715484711:web:c92a57404e49032a81d402',\n  measurementId: 'G-6Z1JKRQ0HF',\n};\n\nlet firebaseApp: FirebaseApp | undefined;\nlet analyticsInstance: Analytics | undefined;\n\nexport function getFirebaseApp(): FirebaseApp {\n  if (!firebaseApp) {\n    firebaseApp = getApps().length ? getApp() : initializeApp(firebaseConfig);\n  }\n  return firebaseApp;\n}\n\nexport async function getFirebaseAnalytics(): Promise<Analytics | undefined> {\n  if (analyticsInstance) {\n    return analyticsInstance;\n  }\n\n  if (typeof window === 'undefined') {\n    return undefined;\n  }\n\n  const { getAnalytics, isSupported } = await import('firebase/analytics');\n\n  const supported = await isSupported().catch(() => false);\n  if (!supported) {\n    return undefined;\n  }\n\n  analyticsInstance = getAnalytics(getFirebaseApp());\n  return analyticsInstance;\n}\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAGA,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,aAAa;IACb,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACjB;AAEA,IAAI;AACJ,IAAI;AAEG,SAAS;IACd,IAAI,CAAC,aAAa;QAChB,cAAc,IAAA,8KAAO,IAAG,MAAM,GAAG,IAAA,6KAAM,MAAK,IAAA,oLAAa,EAAC;IAC5D;IACA,OAAO;AACT;AAEO,eAAe;IACpB,IAAI,mBAAmB;QACrB,OAAO;IACT;IAEA;;IAIA,MAAM,EAAE,YAAY,EAAE,WAAW,EAAE,GAAG;IAEtC,MAAM,YAAY,MAAM,cAAc,KAAK,CAAC,IAAM;IAClD,IAAI,CAAC,WAAW;QACd,OAAO;IACT;IAEA,oBAAoB,aAAa;IACjC,OAAO;AACT","debugId":null}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/udaybiradar/lumora-app/lumora/apps/web/src/contexts/AuthContext.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useCallback, useContext, useEffect, useMemo, useState, type ReactNode } from 'react';\nimport { getFirebaseApp } from '@/lib/firebase';\nimport { getAuth, onAuthStateChanged, signOut, type User as FirebaseUser } from 'firebase/auth';\nimport { doc, getDoc, getFirestore } from 'firebase/firestore';\n\ntype AccountType = 'user' | 'therapist';\n\nexport interface UserProfile {\n  uid: string;\n  email: string;\n  name: string;\n  age: number;\n  gender: string;\n  accountType: AccountType;\n  createdAt?: string;\n}\n\ninterface AuthContextValue {\n  user: FirebaseUser | null;\n  profile: UserProfile | null;\n  loading: boolean;\n  logout: () => Promise<void>;\n  refreshProfile: () => Promise<void>;\n  guestMode: boolean;\n  enableGuestMode: () => void;\n  disableGuestMode: () => void;\n}\n\nconst AuthContext = createContext<AuthContextValue | undefined>(undefined);\n\nasync function fetchUserProfile(uid: string): Promise<UserProfile | null> {\n  try {\n    const db = getFirestore(getFirebaseApp());\n    const snapshot = await getDoc(doc(db, 'users', uid));\n    if (!snapshot.exists()) {\n      return null;\n    }\n    const value = snapshot.data() ?? {};\n    return {\n      uid,\n      email: value.email ?? '',\n      name: value.name ?? '',\n      age: typeof value.age === 'number' ? value.age : Number(value.age) || 0,\n      gender: value.gender ?? '',\n      accountType: value.accountType === 'therapist' ? 'therapist' : 'user',\n      createdAt: value.createdAt,\n    };\n  } catch (error) {\n    console.error('Failed to fetch user profile:', error);\n    return null;\n  }\n}\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<FirebaseUser | null>(null);\n  const [profile, setProfile] = useState<UserProfile | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [guestMode, setGuestMode] = useState(false);\n\n  const loadProfile = useCallback(\n    async (firebaseUser: FirebaseUser | null) => {\n      if (!firebaseUser) {\n        setProfile(null);\n        return;\n      }\n      const freshProfile = await fetchUserProfile(firebaseUser.uid);\n      setProfile(freshProfile);\n    },\n    []\n  );\n\n  useEffect(() => {\n    const app = getFirebaseApp();\n    const auth = getAuth(app);\n\n    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\n      setUser(firebaseUser);\n      if (firebaseUser) {\n        setGuestMode(false);\n      }\n      await loadProfile(firebaseUser);\n      setLoading(false);\n    });\n\n    return () => {\n      unsubscribe();\n    };\n  }, [loadProfile]);\n\n  const logout = useCallback(async () => {\n    const auth = getAuth(getFirebaseApp());\n    await signOut(auth);\n    setGuestMode(true);\n  }, []);\n\n  const refreshProfile = useCallback(async () => {\n    const auth = getAuth(getFirebaseApp());\n    const currentUser = auth.currentUser ?? user;\n    if (currentUser && !user) {\n      setUser(currentUser);\n    }\n    await loadProfile(currentUser);\n  }, [loadProfile, user]);\n\n  const enableGuestMode = useCallback(() => {\n    setGuestMode(true);\n  }, []);\n\n  const disableGuestMode = useCallback(() => {\n    setGuestMode(false);\n  }, []);\n\n  const value = useMemo<AuthContextValue>(\n    () => ({\n      user,\n      profile,\n      loading,\n      logout,\n      refreshProfile,\n      guestMode,\n      enableGuestMode,\n      disableGuestMode,\n    }),\n    [disableGuestMode, enableGuestMode, guestMode, loading, logout, profile, refreshProfile, user]\n  );\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n}\n\nexport function useAuth(): AuthContextValue {\n  const ctx = useContext(AuthContext);\n  if (!ctx) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return ctx;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 218, "column": 0}, "map": {"version":3,"sources":["file:///Users/udaybiradar/lumora-app/lumora/apps/web/src/app/providers.tsx"],"sourcesContent":["'use client';\n\nimport type { ReactNode } from 'react';\nimport { AuthProvider } from '@/contexts/AuthContext';\n\nexport default function Providers({ children }: { children: ReactNode }) {\n  return <AuthProvider>{children}</AuthProvider>;\n}\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAKe,SAAS,UAAU,KAAqC;QAArC,EAAE,QAAQ,EAA2B,GAArC;IAChC,qBAAO,6LAAC,2KAAY;kBAAE;;;;;;AACxB;KAFwB","debugId":null}}]
}